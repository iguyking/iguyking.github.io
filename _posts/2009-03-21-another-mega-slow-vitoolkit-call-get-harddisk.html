---
layout: post
status: publish
published: true
title: Another mega slow VIToolkit call (Get-HardDisk)
author:
  display_name: iguy
  login: iguy
  email: iguy@ionsphere.org
  url: ''
author_login: iguy
author_email: iguy@ionsphere.org
wordpress_id: 133
wordpress_url: http://itsjustanotherlayer.com/?p=133
date: !binary |-
  MjAwOS0wMy0yMSAxODo1MzoyNyAtMDUwMA==
date_gmt: !binary |-
  MjAwOS0wMy0yMSAxODo1MzoyNyAtMDUwMA==
categories:
- VMware
tags:
- Get-HardDisk
- Powershell
- VI Toolkit
- vitoolkit
comments:
- id: 8087
  author: Anon
  author_email: no-reply@example.com
  author_url: ''
  date: !binary |-
    MjAxNS0wMS0xMCAxNjowNTowMiAtMDYwMA==
  date_gmt: !binary |-
    MjAxNS0wMS0xMCAyMjowNTowMiAtMDYwMA==
  content: So what is the New Method that your friend discovered?  The link is broken.
- id: 11262
  author: Petar Enchev
  author_email: haripetrov@gmail.com
  author_url: ''
  date: !binary |-
    MjAxNS0wNC0wOCAwNToyNDoyMyAtMDUwMA==
  date_gmt: !binary |-
    MjAxNS0wNC0wOCAxMDoyNDoyMyAtMDUwMA==
  content: Yes, I would be glad if you can share with us this information because
    the link to http:&#47;&#47;www.sentania.net&#47;2009&#47;03&#47;get-vm-is-retarded-slow&#47;
    is broken.
- id: 11460
  author: iguy
  author_email: iguy@ionsphere.org
  author_url: ''
  date: !binary |-
    MjAxNS0wNS0xMCAxNToxMDoyOCAtMDUwMA==
  date_gmt: !binary |-
    MjAxNS0wNS0xMCAyMDoxMDoyOCAtMDUwMA==
  content: Sorry, I don't have the info any more.  It basically said that get-vm is
    very slow operation and if you did get-view and worked your way to the data you
    were specifically going for it could be 10x as fast if not faster.
---
<p>My <a title="Sentania.Net Website" href="http:&#47;&#47;www.sentania.net" target="_blank">good friend<&#47;a> has found another VI Toolkit call that is amazingly slow compared to pulling useful data from it.   I've done performance testing before of <a href="http:&#47;&#47;itsjustanotherlayer.com&#47;?p=47">Get-VM<&#47;a> against Get-View to get to the useful data needed day to day.&nbsp;&nbsp; In that test using Get-View was 18x faster than using Get-VM.</p>
<p>This past week he was able to dig through the API&#47;mob to find disk data for individual VMs for an internal tracking and reporting system we have.&nbsp;&nbsp; This time he found a way to get the <a title="Get-VM is slow" href="http:&#47;&#47;www.sentania.net&#47;2009&#47;03&#47;get-vm-is-retarded-slow&#47;" target="_blank">majority of useful data from Get-Harddisk<&#47;a> a different way.&nbsp;&nbsp; Rather significant change in speed with another couple hours of work.</p>
<p>This report he generates goes through about 1&#47;2 of our VMs to pull VMDK information.</p>
<blockquote><p>Get-HardDisk => 35 hours</p>
<p>New method => 2 mins 15 seconds<&#47;blockquote><br />
Yes.&nbsp; That's right.&nbsp;&nbsp; 976 times faster.&nbsp;&nbsp; Do the math yourself.</p>
